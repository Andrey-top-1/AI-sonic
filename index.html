<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–Ω–Ω–∏–∫ - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≤–∞—à–∏—Ö —Å–Ω–æ–≤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* –°–¢–ò–õ–ò –û–°–¢–ê–Æ–¢–°–Ø –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô - –æ–Ω–∏ –æ—Ç–ª–∏—á–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω—ã */
        :root {
            --primary: #6d5dfc;
            --primary-dark: #5b4ce2;
            --secondary: #8a4fff;
            --text: #333;
            --text-light: #666;
            --bg: #f9f7fe;
            --card-bg: #ffffff;
            --user-msg: #e3f2fd;
            --bot-msg: #f3e5f5;
            --error: #f44336;
            --success: #4caf50;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... */
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: var(--success);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: var(--error);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-moon"></i>
                    <span>–°–æ–Ω–Ω–∏–∫</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-section="chat">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="#" class="nav-link" data-section="profile">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                        <li><a href="#" class="nav-link" data-section="about">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-outline btn-small" id="login-btn">–í–æ–π—Ç–∏</button>
                    <button class="btn btn-primary btn-small" id="register-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
            </div>
        </div>
    </header>

    <!-- üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±–ª–∞—Å—Ç—å –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="notification-area"></div>

    <main class="container">
        <!-- Authentication Section -->
        <section id="auth-section" class="section">
            <h2 class="section-title">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</h2>
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-tabs">
                        <div class="auth-tab active" data-tab="login">–í—Ö–æ–¥</div>
                        <div class="auth-tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                    </div>
                    
                    <form id="login-form" class="auth-form active">
                        <div class="form-group">
                            <label for="login-email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
                            <input type="email" id="login-email" class="form-control" required>
                            <div class="error-message" id="login-email-error">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email</div>
                        </div>
                        <div class="form-group">
                            <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="login-password" class="form-control" required>
                            <div class="error-message" id="login-password-error">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">–í–æ–π—Ç–∏</button>
                    </form>
                    
                    <form id="register-form" class="auth-form">
                        <div class="form-group">
                            <label for="register-name">–ò–º—è</label>
                            <input type="text" id="register-name" class="form-control" required>
                            <div class="error-message" id="register-name-error">–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤</div>
                        </div>
                        <div class="form-group">
                            <label for="register-email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
                            <input type="email" id="register-email" class="form-control" required>
                            <div class="error-message" id="register-email-error">–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email</div>
                        </div>
                        <div class="form-group">
                            <label for="register-birthdate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                            <input type="date" id="register-birthdate" class="form-control" required>
                            <div class="error-message" id="register-birthdate-error">–ù–µ–≤–µ—Ä–Ω–∞—è –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                        </div>
                        <div class="form-group">
                            <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="register-password" class="form-control" required>
                            <div class="password-strength">
                                <div class="password-strength-bar" id="password-strength-bar"></div>
                            </div>
                            <div class="error-message" id="register-password-error">–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è —Ü–∏—Ñ—Ä—ã –∏ –±—É–∫–≤—ã</div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Chat Section -->
        <section id="chat-section" class="section active">
            <h2 class="section-title">–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≤–∞—à–∏—Ö —Å–Ω–æ–≤</h2>
            <div class="chat-container">
                <div class="chat-history">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è —Å–Ω–æ–≤</h3>
                    <div class="dreams-list" id="chat-dreams-list">
                        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</div>
                    </div>
                </div>
                <div class="chat-messages">
                    <div class="messages-container" id="messages-container">
                        <!-- üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
                        <div class="message bot-message">
                            <div class="message-text">
                                –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–≤–æ–∏ —Å–Ω—ã. –û–ø–∏—à–∏, —á—Ç–æ —Ç–µ–±–µ –ø—Ä–∏—Å–Ω–∏–ª–æ—Å—å, –∏ —è –¥–∞–º –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é.
                            </div>
                            <div class="message-time" id="welcome-time"></div>
                        </div>
                    </div>
                    <div class="input-container">
                        <textarea class="message-input" id="message-input" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π —Å–æ–Ω..."></textarea>
                        <button class="voice-button" id="voice-button">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="send-button" id="send-button">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="section">
            <h2 class="section-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
            <div class="profile-container">
                <div class="profile-sidebar">
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <h3 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                            <p id="user-email">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                            <p id="user-birthdate">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                    <div class="dreams-history">
                        <h3>–ò—Å—Ç–æ—Ä–∏—è —Å–Ω–æ–≤</h3>
                        <div class="dreams-list" id="profile-dreams-list">
                            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</div>
                        </div>
                    </div>
                </div>
                <div class="profile-content">
                    <div class="dream-detail active" id="dream-detail-default">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π</h3>
                        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —Å–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="dream-chart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about-section" class="section">
            <h2 class="section-title">–û –ø—Ä–æ–µ–∫—Ç–µ "–°–æ–Ω–Ω–∏–∫"</h2>
            <div style="max-width: 800px; margin: 0 auto; background-color: var(--card-bg); padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow);">
                <p>–°–æ–Ω–Ω–∏–∫ - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Å–Ω–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.</p>
                <h3 style="margin-top: 20px; color: var(--primary);">–ù–∞—à–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h3>
                <ul style="margin-top: 15px; margin-left: 20px;">
                    <li>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∏ –æ–±—Ä–∞–∑–æ–≤ –∏–∑ –≤–∞—à–∏—Ö —Å–Ω–æ–≤</li>
                    <li>–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏—è —Å–Ω–∞</li>
                    <li>–ì–æ–ª–æ—Å–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π</li>
                    <li>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç—ã—Ö —Ç–µ–º –∏ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –≤–∞—à–∏—Ö —Å–Ω–∞—Ö</li>
                    <li>–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤–∞—à–∏—Ö —Å–Ω–æ–≤ –∏ –∏—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π</li>
                </ul>
                <h3 style="margin-top: 20px; color: var(--primary);">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3>
                <p style="margin-top: 15px;">–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π n8n –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π –≤–∞—à–∏—Ö —Å–Ω–æ–≤.</p>
            </div>
        </section>
    </main>

    <script>
        // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
        const API_CONFIG = {
            // –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–®–ò –†–ï–ê–õ–¨–ù–´–ï URL-–∞–¥—Ä–µ—Å–∞ n8n
            baseUrl: 'https://your-n8n-instance.railway.app', // –í–∞—à Railway URL
            endpoints: {
                register: '/webhook/register',
                login: '/webhook/login', 
                sendMessage: '/webhook/chat',
                getChatHistory: '/webhook/chat-history',
                getDreams: '/webhook/dreams',
                getDreamDetail: '/webhook/dream-detail',
                getUserProfile: '/webhook/user-profile',
                getAnalytics: '/webhook/analytics',
                voiceToText: '/webhook/asr',
                textToSpeech: '/webhook/tts'
            }
        };

        // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentUser = null;
        let currentChatId = null;
        let isRecording = false;
        let mediaRecorder = null;
        let audioChunks = [];

        // DOM Elements
        const authSection = document.getElementById('auth-section');
        const chatSection = document.getElementById('chat-section');
        const profileSection = document.getElementById('profile-section');
        const aboutSection = document.getElementById('about-section');
        const navLinks = document.querySelectorAll('.nav-link');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const messagesContainer = document.getElementById('messages-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const voiceButton = document.getElementById('voice-button');
        const passwordInput = document.getElementById('register-password');
        const passwordStrengthBar = document.getElementById('password-strength-bar');
        const chatDreamsList = document.getElementById('chat-dreams-list');
        const profileDreamsList = document.getElementById('profile-dreams-list');
        const userName = document.getElementById('user-name');
        const userEmail = document.getElementById('user-email');
        const userBirthdate = document.getElementById('user-birthdate');

        // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.getElementById('notification-area').appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        document.getElementById('welcome-time').textContent = new Date().getHours() + ':' + 
            (new Date().getMinutes() < 10 ? '0' : '') + new Date().getMinutes();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('authToken');
            if (token) {
                fetchUserProfile();
            }
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section') + '-section';
                
                navLinks.forEach(nav => nav.classList.remove('active'));
                link.classList.add('active');
                
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
                
                if (sectionId === 'profile-section' && currentUser) {
                    loadProfileData();
                }
            });
        });

        // –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        loginBtn.addEventListener('click', showAuthSection);
        registerBtn.addEventListener('click', showAuthSection);

        function showAuthSection() {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            authSection.classList.add('active');
            
            navLinks.forEach(nav => nav.classList.remove('active'));
        }

        // –í–∫–ª–∞–¥–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                authForms.forEach(form => form.classList.remove('active'));
                document.getElementById(`${tabName}-form`).classList.add('active');
            });
        });

        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        passwordInput.addEventListener('input', () => {
            const password = passwordInput.value;
            let strength = 0;
            
            if (password.length >= 8) strength += 1;
            if (/\d/.test(password)) strength += 1;
            if (/[a-zA-Z]/.test(password)) strength += 1;
            if (/[^a-zA-Z0-9]/.test(password)) strength += 1;
            
            passwordStrengthBar.className = 'password-strength-bar';
            if (strength === 0) {
            } else if (strength === 1) {
                passwordStrengthBar.classList.add('password-weak');
            } else if (strength === 2) {
                passwordStrengthBar.classList.add('password-medium');
            } else {
                passwordStrengthBar.classList.add('password-strong');
            }
        });

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!isValidEmail(email)) {
                document.getElementById('login-email-error').style.display = 'block';
                return;
            } else {
                document.getElementById('login-email-error').style.display = 'none';
            }
            
            if (password.length < 6) {
                document.getElementById('login-password-error').style.display = 'block';
                return;
            } else {
                document.getElementById('login-password-error').style.display = 'none';
            }
            
            loginUser(email, password);
        });

        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const birthdate = document.getElementById('register-birthdate').value;
            const password = document.getElementById('register-password').value;
            
            let isValid = true;
            
            if (name.length < 2) {
                document.getElementById('register-name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('register-name-error').style.display = 'none';
            }
            
            if (!isValidEmail(email)) {
                document.getElementById('register-email-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('register-email-error').style.display = 'none';
            }
            
            if (!isValidDate(birthdate)) {
                document.getElementById('register-birthdate-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('register-birthdate-error').style.display = 'none';
            }
            
            if (password.length < 8 || !/\d/.test(password) || !/[a-zA-Z]/.test(password)) {
                document.getElementById('register-password-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('register-password-error').style.display = 'none';
            }
            
            if (!isValid) return;
            
            registerUser(name, email, birthdate, password);
        });

        // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–∞—Ç–∞
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message === '') return;
            
            addMessage(message, 'user');
            messageInput.value = '';
            
            sendMessageToBot(message);
        }

        function addMessage(text, sender, timestamp = new Date()) {
            // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±–∏—Ä–∞–µ–º loading –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
            if (messagesContainer.querySelector('.loading')) {
                messagesContainer.innerHTML = '';
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
            
            const messageText = document.createElement('div');
            messageText.classList.add('message-text');
            messageText.textContent = text;
            
            const messageTime = document.createElement('div');
            messageTime.classList.add('message-time');
            messageTime.textContent = timestamp.getHours() + ':' + 
                (timestamp.getMinutes() < 10 ? '0' : '') + timestamp.getMinutes();
            
            messageDiv.appendChild(messageText);
            messageDiv.appendChild(messageTime);
            
            if (sender === 'bot') {
                const ttsButton = document.createElement('button');
                ttsButton.classList.add('tts-button');
                ttsButton.innerHTML = '<i class="fas fa-volume-up"></i>';
                ttsButton.addEventListener('click', () => {
                    textToSpeech(text);
                });
                messageDiv.insertBefore(ttsButton, messageText);
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
        voiceButton.addEventListener('click', toggleRecording);

        function toggleRecording() {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        }

        function startRecording() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        audioChunks = [];
                        
                        mediaRecorder.ondataavailable = event => {
                            audioChunks.push(event.data);
                        };
                        
                        mediaRecorder.onstop = () => {
                            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                            voiceToText(audioBlob);
                        };
                        
                        mediaRecorder.start();
                        isRecording = true;
                        voiceButton.classList.add('recording');
                    })
                    .catch(error => {
                        console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', error);
                        showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É', 'error');
                    });
            } else {
                showNotification('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ', 'error');
            }
        }

        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
                isRecording = false;
                voiceButton.classList.remove('recording');
            }
        }

        // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–ª—É—á—à–µ–Ω–Ω—ã–µ API —Ñ—É–Ω–∫—Ü–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

        async function registerUser(name, email, birthdate, password) {
            try {
                showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...', 'success');
                
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.register, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name,
                        email,
                        birthdate,
                        password
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    localStorage.setItem('authToken', data.token);
                    currentUser = data.user;
                    
                    showChatSection();
                    loadChatData();
                    
                    showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!');
                } else {
                    showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + data.message, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'error');
            }
        }

        async function loginUser(email, password) {
            try {
                showNotification('–í—Ö–æ–¥...', 'success');
                
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.login, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email,
                        password
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    localStorage.setItem('authToken', data.token);
                    currentUser = data.user;
                    
                    showChatSection();
                    loadChatData();
                    
                    showNotification('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + data.message, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ', 'error');
            }
        }

        async function fetchUserProfile() {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.getUserProfile, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser = data.user;
                    showChatSection();
                    loadChatData();
                } else {
                    localStorage.removeItem('authToken');
                    showAuthSection();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
                localStorage.removeItem('authToken');
                showAuthSection();
            }
        }

        async function sendMessageToBot(message) {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.sendMessage, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    },
                    body: JSON.stringify({
                        message,
                        userId: currentUser?.id
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    addMessage(data.response, 'bot', new Date());
                    loadDreamsList();
                } else {
                    showNotification('–û—à–∏–±–∫–∞: ' + data.message, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
                
                // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ, –µ—Å–ª–∏ n8n –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
                setTimeout(() => {
                    addMessage("–≠—Ç–æ –¥–µ–º–æ-–æ—Ç–≤–µ—Ç. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ n8n workflow —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π AI.", 'bot', new Date());
                }, 1000);
            }
        }

        async function loadChatHistory() {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.getChatHistory, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    }
                });
                
                const data = await response.json();
                
                if (data.success && data.messages.length > 0) {
                    messagesContainer.innerHTML = '';
                    data.messages.forEach(msg => {
                        addMessage(
                            msg.text, 
                            msg.sender, 
                            new Date(msg.timestamp)
                        );
                    });
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞:', error);
            }
        }

        async function loadDreamsList() {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.getDreams, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    renderDreamsList(data.dreams, chatDreamsList);
                    renderDreamsList(data.dreams, profileDreamsList);
                } else {
                    chatDreamsList.innerHTML = '<div class="loading">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–Ω–æ–≤</div>';
                    profileDreamsList.innerHTML = '<div class="loading">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–Ω–æ–≤</div>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ —Å–Ω–æ–≤:', error);
                // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                const demoDreams = [
                    { id: 1, date: new Date(), preview: '–°–æ–Ω –æ –ø–æ–ª–µ—Ç–µ –Ω–∞–¥ –≥–æ—Ä–æ–¥–æ–º...' },
                    { id: 2, date: new Date(Date.now() - 86400000), preview: '–í—Å—Ç—Ä–µ—á–∞ —Å–æ —Å—Ç–∞—Ä—ã–º –¥—Ä—É–≥–æ–º...' }
                ];
                renderDreamsList(demoDreams, chatDreamsList);
                renderDreamsList(demoDreams, profileDreamsList);
            }
        }

        function renderDreamsList(dreams, container) {
            if (!dreams || dreams.length === 0) {
                container.innerHTML = '<div class="loading">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–Ω–æ–≤</div>';
                return;
            }
            
            container.innerHTML = '';
            
            dreams.forEach(dream => {
                const dreamItem = document.createElement('div');
                dreamItem.classList.add('dream-item');
                dreamItem.setAttribute('data-dream-id', dream.id);
                
                const dreamDate = document.createElement('div');
                dreamDate.classList.add('dream-date');
                dreamDate.textContent = new Date(dream.date).toLocaleDateString('ru-RU');
                
                const dreamPreview = document.createElement('div');
                dreamPreview.classList.add('dream-preview');
                dreamPreview.textContent = dream.preview;
                
                dreamItem.appendChild(dreamDate);
                dreamItem.appendChild(dreamPreview);
                
                dreamItem.addEventListener('click', () => {
                    loadDreamDetail(dream.id);
                });
                
                container.appendChild(dreamItem);
            });
        }

        async function loadDreamDetail(dreamId) {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.getDreamDetail + `?dreamId=${dreamId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    renderDreamDetail(data.dream);
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Å–Ω–∞', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Å–Ω–∞:', error);
                // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                renderDreamDetail({
                    id: dreamId,
                    date: new Date(),
                    description: "–≠—Ç–æ –¥–µ–º–æ-–æ–ø–∏—Å–∞–Ω–∏–µ —Å–Ω–∞. –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ n8n –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.",
                    interpretation: "–î–µ–º–æ-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: —ç—Ç–æ—Ç —Å–æ–Ω –º–æ–∂–µ—Ç —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏—è –∫ —Å–≤–æ–±–æ–¥–µ."
                });
            }
        }

        function renderDreamDetail(dream) {
            const dreamDetailContainer = document.querySelector('.profile-content');
            
            document.querySelectorAll('.dream-detail').forEach(detail => {
                detail.classList.remove('active');
            });
            
            let dreamDetail = document.getElementById(`dream-detail-${dream.id}`);
            if (!dreamDetail) {
                dreamDetail = document.createElement('div');
                dreamDetail.classList.add('dream-detail');
                dreamDetail.id = `dream-detail-${dream.id}`;
                dreamDetailContainer.insertBefore(dreamDetail, document.querySelector('.chart-container'));
            }
            
            dreamDetail.innerHTML = `
                <h3>–°–æ–Ω –æ—Ç ${new Date(dream.date).toLocaleDateString('ru-RU')}</h3>
                <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${dream.description}</p>
                <p><strong>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:</strong> ${dream.interpretation}</p>
                ${dream.symbols ? `<p><strong>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã:</strong> ${dream.symbols.join(', ')}</p>` : ''}
            `;
            
            dreamDetail.classList.add('active');
        }

        async function loadAnalytics() {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.getAnalytics, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    renderAnalyticsChart(data.analytics);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:', error);
                // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –î–µ–º–æ-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                renderAnalyticsChart({
                    labels: ['–ü–æ–ª–µ—Ç', '–í–æ–¥–∞', '–ñ–∏–≤–æ—Ç–Ω—ã–µ', '–ü–æ–≥–æ–Ω—è', '–î–æ–º'],
                    data: [12, 8, 6, 5, 4]
                });
            }
        }

        function renderAnalyticsChart(analytics) {
            const ctx = document.getElementById('dream-chart').getContext('2d');
            
            if (window.dreamChart instanceof Chart) {
                window.dreamChart.destroy();
            }
            
            window.dreamChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: analytics.labels || ['–ü–æ–ª–µ—Ç', '–í–æ–¥–∞', '–ñ–∏–≤–æ—Ç–Ω—ã–µ', '–ü–æ–≥–æ–Ω—è', '–î–æ–º'],
                    datasets: [{
                        label: '–ß–∞—Å—Ç–æ—Ç–∞ —Ç–µ–º –≤ —Å–Ω–∞—Ö',
                        data: analytics.data || [12, 8, 6, 5, 4],
                        backgroundColor: [
                            'rgba(109, 93, 252, 0.7)',
                            'rgba(138, 79, 255, 0.7)',
                            'rgba(156, 39, 176, 0.7)',
                            'rgba(103, 58, 183, 0.7)',
                            'rgba(63, 81, 181, 0.7)'
                        ],
                        borderColor: [
                            'rgba(109, 93, 252, 1)',
                            'rgba(138, 79, 255, 1)',
                            'rgba(156, 39, 176, 1)',
                            'rgba(103, 58, 183, 1)',
                            'rgba(63, 81, 181, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '–¢–µ–º—ã —Å–Ω–æ–≤'
                            }
                        }
                    }
                }
            });
        }

        async function voiceToText(audioBlob) {
            try {
                const formData = new FormData();
                formData.append('audio', audioBlob, 'recording.wav');
                
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.voiceToText, {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    },
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    messageInput.value = data.text;
                } else {
                    showNotification('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏:', error);
                showNotification('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏', 'error');
            }
        }

        async function textToSpeech(text) {
            try {
                const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.textToSpeech, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('authToken')
                    },
                    body: JSON.stringify({ text })
                });
                
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞');
                }

                // üî¥ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ–æ—Ç–≤–µ—Ç–∞
                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                const audio = new Audio(audioUrl);
                audio.play();

                audio.onended = () => {
                    URL.revokeObjectURL(audioUrl);
                };
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞:', error);
                showNotification('–û—à–∏–±–∫–∞ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞', 'error');
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showChatSection() {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            chatSection.classList.add('active');
            
            navLinks.forEach(nav => nav.classList.remove('active'));
            document.querySelector('[data-section="chat"]').classList.add('active');
            
            loginBtn.textContent = '–í—ã–π—Ç–∏';
            registerBtn.style.display = 'none';
            
            loginBtn.onclick = () => {
                localStorage.removeItem('authToken');
                currentUser = null;
                loginBtn.textContent = '–í–æ–π—Ç–∏';
                registerBtn.style.display = 'block';
                showAuthSection();
            };
        }

        function loadChatData() {
            loadChatHistory();
            loadDreamsList();
        }

        function loadProfileData() {
            if (currentUser) {
                userName.textContent = currentUser.name;
                userEmail.textContent = currentUser.email;
                userBirthdate.textContent = `–†–æ–¥–∏–ª—Å—è: ${new Date(currentUser.birthdate).toLocaleDateString('ru-RU')}`;
            }
            
            loadDreamsList();
            loadAnalytics();
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function isValidDate(dateString) {
            const date = new Date(dateString);
            return !isNaN(date.getTime());
        }
    </script>
</body>
</html>
